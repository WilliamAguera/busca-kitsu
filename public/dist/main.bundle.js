!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r="https://kitsu.io/api/edge",a=function(e){var t=new XMLHttpRequest;t.onload=c,e?t.open("GET","".concat(r,"/characters?filter[name]=").concat(e)):t.open("GET","".concat(r,"/characters?page[limit]=10&page[offset]=0")),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send()},i=function(e){if(e.target.status>=200&&e.target.status<300){var t=JSON.parse(e.target.response);o(t.data)}},o=function(e){for(var t=[],n=function(n){t.push(new Promise((function(t,r){var a=new XMLHttpRequest;a.onload=function(e){return function(e,t){if(e.target.status>=200&&e.target.status<300){var n=JSON.parse(e.target.response);B(n.data),t(n.data)}}(e,t)},a.open("GET",e[n].relationships.media.links.related),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send()})))},r=0;r<e.length;r++)n(r);Promise.all(t).then((function(e){O()}))},c=function(e){if(e.target.status>=200&&e.target.status<300){var t=JSON.parse(e.target.response);if(t.data.length>0)return l.setCollection(t.data),void b();C(!1),w(!0)}};function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_chars",[]),u(this,"_selected",null)}var t,n,r;return t=e,(n=[{key:"setCollection",value:function(e){this.chars=e,v(e)}},{key:"chars",set:function(e){this._chars=e},get:function(){return this._chars}},{key:"selected",set:function(e){this._selected=this.chars.find((function(t){return String(t.id)===String(e)}))},get:function(){return this._selected}}])&&s(t.prototype,n),r&&s(t,r),e}();n.d(t,"store",(function(){return l})),n.d(t,"buildCharacters",(function(){return v})),n.d(t,"buildButtonsPaginator",(function(){return y})),n.d(t,"setPageSelected",(function(){return b})),n.d(t,"setEmptyList",(function(){return w})),n.d(t,"removeAllSelected",(function(){return E})),n.d(t,"setLoadingContent",(function(){return C})),n.d(t,"setLoadingMedia",(function(){return T})),n.d(t,"filter",(function(){return M})),n.d(t,"handlePaginatorWhileFiltering",(function(){return L})),n.d(t,"setFiltering",(function(){return P})),n.d(t,"debounceTime",(function(){return S})),n.d(t,"setCharacterSelected",(function(){return x})),n.d(t,"setCharacterMedia",(function(){return B})),n.d(t,"buildCharacterMedia",(function(){return O})),n.d(t,"buildHeaderMedia",(function(){return I})),n.d(t,"addEmptyListOverlay",(function(){return j})),n.d(t,"removeEmptyListOverlay",(function(){return H})),n.d(t,"addLoadingElement",(function(){return _})),n.d(t,"removeLoadingElement",(function(){return k})),n.d(t,"clearContent",(function(){return q})),n.d(t,"clearContentMedias",(function(){return R})),n.d(t,"clearContentMediaHeader",(function(){return F})),n.d(t,"clearContentPaginator",(function(){return N})),n.d(t,"transformHTML",(function(){return A})),n.d(t,"navigatePage",(function(){return G})),n.d(t,"previousPage",(function(){return W})),n.d(t,"nextPage",(function(){return U})),n.d(t,"handleRemainingPages",(function(){return X})),n.d(t,"getPageButtons",(function(){return z})),n.d(t,"listenWindowResize",(function(){return J})),n.d(t,"handleModal",(function(){return D}));var l=new d,f=0,m=[],g=!1,p="",h=!1;a();var v=function(e){C(!1),w(!1),e.forEach((function(e){var t='\n       <div class="char-item" id="character" onclick="handleModal(\'open\', '.concat(e.id,')">\n          <div class="char-info">\n            <img class="char-img" src="').concat(e.attributes.image?e.attributes.image.original:"assets/img/avatar.png",'">\n            <span class="char-name-item">').concat(e.attributes.name,'</span>\n          </div>\n          <div class="char-description ellipsis">\n                ').concat(e.attributes.description||"No biography written.","\n          </div>\n       </div>");document.getElementById("chars-content").appendChild(A(t))})),document.querySelector("#filter_chars").oninput=function(e){return setTimeout((function(){M(e.target.value)}),1e3)}},y=function(e){N();var t=g?3:6;t=h?1:t,Array.from({length:t}).forEach((function(t,n){var r='<div class="page-button-item chars-flex-center" id="page-button-'.concat(e+n,'"\n                            onclick="navigatePage(').concat(e+n,')">').concat(e+n+1,"</div>");document.getElementById("page-items").appendChild(A(r))}))},b=function(){E(),document.getElementById("page-button-".concat(f)).classList.add("selected"),C(!1)},w=function(e){e?j("chars-content"):H("chars-content")},E=function(){var e=document.querySelectorAll(".page-button-item"),t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){a.value.classList.remove("selected")}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},C=function(e){e?_("chars-content"):k("chars-content")},T=function(e){e?_("media-content"):k("media-content")},M=function(e){h=e.length>0,String(e).trim()!==String(p).trim()&&(q(),_("chars-content"),a(e),p=e),L()},L=function(){h?y(0):(f=0,y(0))},P=function(e){h=e.length>0,y(0)},S=function(e,t){var n=0;return function(){clearTimeout(n),n=setTimeout(t,e)}},x=function(){m=[],function(e){var t=new XMLHttpRequest;t.onload=i,t.open("GET",e),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send()}(l.selected.relationships.mediaCharacters.links.related),T(!0)},B=function(e){m.push(e)},O=function(){R(),F(),m.forEach((function(e){var t='\n           <div class="media-item">\n                    <div class="chars-flex-start chars-flex-column">\n                        <img class="cover-image" src="'.concat(e.attributes.posterImage.small,'">\n                        <div class="media-rating-wrapper">\n                           <label>Classificação Média: </label><div class="media-rating chars-flex-center">').concat(Math.round(Number(e.attributes.averageRating)),'</div>\n                        </div>\n                    </div>\n                    <div class="media-info">\n                        <h3 class="media-title">').concat(e.attributes.canonicalTitle,'</h3>\n                        <label>Categoria: <strong style="text-transform: capitalize">').concat(e.type,"</strong></label>\n                        <p>").concat(e.attributes.synopsis,"</p>\n                    </div>\n                </div>");document.getElementById("media-content").appendChild(A(t))})),I(),T(!1)},I=function(){var e='\n                <div class="char-header">\n                    <img class="char-image" src="'.concat(l.selected.attributes.image.original,'">\n                    <span class="char-name">').concat(l.selected.attributes.name,"</span>\n                </div>");document.getElementById("media-char-header").appendChild(A(e))},j=function(e){document.getElementById(e).insertAdjacentElement("afterbegin",A('\n            <div id="empty-overlay" class="overlay chars-flex-center chars-flex-column">\n                <span class="empty-label">Não há registros</span>\n            </div>'))},H=function(e){var t=document.getElementById("empty-overlay");t&&document.getElementById(e).removeChild(t)},_=function(e){document.getElementById(e).insertAdjacentElement("afterbegin",A('\n            <div id="loading-backdrop" class="overlay chars-flex-center chars-flex-column">\n                <img class="loader" src="assets/svg/loading.svg" width="100px">\n            </div>'))},k=function(e){var t=document.getElementById("loading-backdrop");t&&document.getElementById(e).removeChild(t)},q=function(){document.getElementById("chars-content").innerHTML=""},R=function(){document.getElementById("media-content").innerHTML=""},F=function(){document.getElementById("media-char-header").innerHTML=""},N=function(){document.getElementById("page-items").innerHTML=""},A=function(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild},G=function(e){h||function(e){q(),C(!0);var t=new XMLHttpRequest;t.onload=c,t.open("GET","".concat(r,"/characters?page[limit]=10&page[offset]=").concat(e)),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.send()}(10*(f=e))},W=function(){f>0&&!h&&(z()[0].classList.contains("selected")&&y(X()),G(f-1))},U=function(){if(!h){var e=z();e[e.length-1].classList.contains("selected")&&y(f+1),G(f+1)}},X=function(){var e=g?f-3:f-6;return e-3<0&&(e=0),e},z=function(){return document.querySelectorAll(".page-button-item")},J=function(){window.addEventListener("resize",(function(e){window.innerWidth<780&&!g&&(g=!0,y(f),G(f)),window.innerWidth>780&&g&&(g=!1,y(f<6?0:f),G(f))}))},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.getElementsByClassName("modal-wrapper")[0];if(n){if("open"===e)return n.classList.add("isOpened"),void(t&&(l.selected=t,x()));n.classList.remove("isOpened")}};window.onload=function(){g=window.innerWidth<780,y(0),J()},window.nextPage=function(e){return U(e)},window.handleModal=D,window.navigatePage=G,window.previousPage=W}]);